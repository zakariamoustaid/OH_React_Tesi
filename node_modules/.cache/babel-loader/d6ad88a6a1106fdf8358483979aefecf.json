{"ast":null,"code":"var _jsxFileName = \"/home/zak/projects/OH_R/openhospital-ui/src/components/accessories/tabs/RouterTabs.tsx\";\nimport classNames from \"classnames\";\nimport React, { Fragment, useEffect } from \"react\";\nimport { Switch } from \"react-router\";\nimport { useHistory, useLocation, useRouteMatch } from \"react-router-dom\";\nimport PrivateRoute from \"../privateRoute/PrivateRoute\";\nimport { useFilterPermission } from \"./hooks/useFilterPermission\";\nimport \"./styles.scss\";\n\nconst RouterTabs = ({\n  config,\n  defaultRoute\n}) => {\n  const history = useHistory();\n  const match = useRouteMatch();\n  const {\n    url\n  } = match;\n  const {\n    pathname\n  } = useLocation();\n  const tabs = useFilterPermission(config);\n  const currentPath = config.map(item => item.path).find(path => pathname.match(new RegExp(`^(${url}${path})([/?].*)?$`, \"gi\")));\n\n  const switchTab = path => {\n    history.push(url + path);\n  };\n\n  useEffect(() => {\n    if (defaultRoute && !currentPath) {\n      // default tab route\n      history.push(url + defaultRoute);\n    }\n  }, [history, defaultRoute, currentPath, url]);\n\n  const renderHeader = (mobile = false) => {\n    if (!mobile) {\n      return tabs.map((item, index) => {\n        const path = item.path;\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: classNames(\"tab\", {\n            active: path === currentPath\n          }),\n          key: index,\n          onClick: () => switchTab(path),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 38,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 13\n          }\n        }, item.label));\n      });\n    } else {\n      return tabs.map((item, index) => {\n        const path = item.path;\n        return /*#__PURE__*/React.createElement(\"option\", {\n          className: classNames(\"tab\", {\n            active: path === currentPath\n          }),\n          key: index,\n          value: path,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 11\n          }\n        }, item.label);\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tabs_header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tabs desktop\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, renderHeader()), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tabs mobile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    value: currentPath,\n    onChange: e => switchTab(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, renderHeader(true)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tabs_content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, tabs.map((item, index) => /*#__PURE__*/React.createElement(PrivateRoute, {\n    path: url + item.path,\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"panel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 15\n    }\n  }, item.content))))));\n};\n\nexport default RouterTabs;","map":{"version":3,"sources":["/home/zak/projects/OH_R/openhospital-ui/src/components/accessories/tabs/RouterTabs.tsx"],"names":["classNames","React","Fragment","useEffect","Switch","useHistory","useLocation","useRouteMatch","PrivateRoute","useFilterPermission","RouterTabs","config","defaultRoute","history","match","url","pathname","tabs","currentPath","map","item","path","find","RegExp","switchTab","push","renderHeader","mobile","index","active","label","e","target","value","content"],"mappings":"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","sourcesContent":["import classNames from \"classnames\";\nimport React, { Fragment, FunctionComponent, useEffect } from \"react\";\nimport { Switch } from \"react-router\";\nimport { useHistory, useLocation, useRouteMatch } from \"react-router-dom\";\nimport PrivateRoute from \"../privateRoute/PrivateRoute\";\nimport { useFilterPermission } from \"./hooks/useFilterPermission\";\nimport \"./styles.scss\";\nimport { IProps } from \"./types\";\n\nconst RouterTabs: FunctionComponent<IProps> = ({ config, defaultRoute }) => {\n  const history = useHistory();\n  const match = useRouteMatch();\n  const { url } = match;\n  const { pathname } = useLocation();\n  const tabs = useFilterPermission(config);\n  const currentPath: string | undefined = config\n    .map((item) => item.path)\n    .find((path) =>\n      pathname.match(new RegExp(`^(${url}${path})([/?].*)?$`, \"gi\"))\n    );\n\n  const switchTab = (path: string) => {\n    history.push(url + path);\n  };\n\n  useEffect(() => {\n    if (defaultRoute && !currentPath) {\n      // default tab route\n      history.push(url + defaultRoute);\n    }\n  }, [history, defaultRoute, currentPath, url]);\n\n  const renderHeader = (mobile = false): JSX.Element[] => {\n    if (!mobile) {\n      return tabs.map((item, index) => {\n        const path = item.path!;\n        return (\n          <div\n            className={classNames(\"tab\", { active: path === currentPath })}\n            key={index}\n            onClick={() => switchTab(path)}\n          >\n            <span>{item.label}</span>\n          </div>\n        );\n      });\n    } else {\n      return tabs.map((item, index) => {\n        const path = item.path!;\n        return (\n          <option\n            className={classNames(\"tab\", { active: path === currentPath })}\n            key={index}\n            value={path}\n          >\n            {item.label}\n          </option>\n        );\n      });\n    }\n  };\n\n  return (\n    <Fragment>\n      <div className=\"tabs_header\">\n        <div className=\"tabs desktop\">{renderHeader()}</div>\n        <div className=\"tabs mobile\">\n          <select\n            value={currentPath}\n            onChange={(e) => switchTab(e.target.value)}\n          >\n            {renderHeader(true)}\n          </select>\n        </div>\n      </div>\n      <div className=\"tabs_content\">\n        <Switch>\n          {tabs.map((item, index) => (\n            <PrivateRoute path={url + item.path} key={index}>\n              <div className=\"panel\">{item.content}</div>\n            </PrivateRoute>\n          ))}\n        </Switch>\n      </div>\n    </Fragment>\n  );\n};\n\nexport default RouterTabs;\n"]},"metadata":{},"sourceType":"module"}