{"ast":null,"code":"var _jsxFileName = \"/home/zak/Tesi/OH_React_Tesi/src/components/activities/newBillActivity/NewBillActivity.tsx\";\nimport React, { useEffect, useState } from \"react\";\nimport { Redirect } from \"react-router\";\nimport AppHeader from \"../../accessories/appHeader/AppHeader\";\nimport Footer from \"../../accessories/footer/Footer\";\nimport Button from \"@material-ui/core/Button\";\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { useTranslation } from \"react-i18next\";\nimport { connect } from \"react-redux\";\nimport checkIcon from \"../../../assets/check-icon.png\";\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Dialog from '@material-ui/core/Dialog';\nimport AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport \"./styles.scss\";\nimport HighlightOffIcon from '@material-ui/icons/HighlightOff';\nimport { getPrices } from \"../../../state/prices/actions\";\nimport { newBill, newBillReset } from \"../../../state/bills/actions\";\nimport DrawerActivity from \"./DrawerActivity\";\nimport TextField from \"@material-ui/core/TextField\";\nimport ConfirmationDialog from \"../../accessories/confirmationDialog/ConfirmationDialog\";\n\nconst NewBillActivity = ({\n  userCredentials,\n  prices,\n  getPrices,\n  newBill,\n  newBillReset,\n  hasFailed,\n  hasSucceeded,\n  isLoading,\n  dashboardRoute\n}) => {\n  const {\n    t\n  } = useTranslation();\n  const breadcrumbMap = {\n    [t(\"nav.dashboard\")]: \"/\",\n    [t(\"nav.billing\")]: \"/billing\",\n    [t(\"nav.newbill\")]: \"/bills\"\n  }; //get prices/list\n\n  useEffect(() => {\n    getPrices();\n  }, []);\n  const [items, setItems] = React.useState([]);\n  const [activityTransitionState, setActivityTransitionState] = useState(\"IDLE\");\n  const [billComplete, setBillComplete] = useState(false);\n  useEffect(() => {\n    if (activityTransitionState === \"TO_BILL_HOME\" || activityTransitionState === \"TO_DASHBOARD\") {\n      newBillReset();\n    }\n  }, [activityTransitionState]); //  //  //  //  //\n  //  GET TOKEN   //\n  //  //  //  //  //\n\n  const [token_auth, setToken] = useState('');\n  useEffect(() => {\n    const url = \"https://www.open-hospital.org/oh11-api/auth/login?password=admin&username=admin\";\n    const cont_t = 'application/json';\n    const acc = \"*/*\";\n\n    const fetchDataTok = async () => {\n      try {\n        const response = await fetch(url, {\n          method: 'POST',\n          headers: {\n            'Content-Type': cont_t,\n            'Accept': acc\n          }\n        });\n        const json = await response.json();\n        setToken(json.token);\n      } catch (error) {\n        console.log(\"error\", error);\n      }\n    };\n\n    fetchDataTok();\n  }, []); //  //  //  //  //\n  //  GET PATIENT //\n  //  //  //  //  //\n\n  const [pat, setPatient] = useState();\n\n  const getPat = e => {\n    e.preventDefault();\n    const url = \"https://www.open-hospital.org/oh11-api/patients?page=1&size=1\";\n    const auth = \"Bearer \" + token_auth;\n    const acc = \"application/json\";\n\n    const fetchData = async () => {\n      try {\n        const response = await fetch(url, {\n          method: 'GET',\n          headers: {\n            Accept: acc,\n            Authorization: auth\n          }\n        });\n        const json = await response.json();\n        setPatient(json[0]);\n      } catch (error) {\n        console.log(\"error\", error);\n      }\n    };\n\n    fetchData();\n  };\n\n  const patient_data = (pat === null || pat === void 0 ? void 0 : pat.firstName) + \" \" + (pat === null || pat === void 0 ? void 0 : pat.secondName);\n  const [createBill, setCreateBill] = React.useState(); //GET DATE\n\n  const [date, setDate] = useState('');\n\n  const get_date = e => {\n    e.preventDefault();\n    setDate(e.currentTarget.value);\n  }; //Set patient and date\n\n\n  useEffect(() => {\n    if (date !== undefined && pat !== undefined) setCreateBill({\n      id: 0,\n      list: true,\n      listId: 0,\n      patient: pat,\n      date: date,\n      update: date,\n      listName: \"Basic\",\n      patientTrue: true,\n      patName: (pat === null || pat === void 0 ? void 0 : pat.firstName) + \" \" + (pat === null || pat === void 0 ? void 0 : pat.secondName),\n      status: \"O\",\n      amount: 1000,\n      balance: 1500,\n      user: \"admin\"\n    });\n  }, [date, pat]); //  //  //  //  //\n  // CREATE BILL  //\n  //  //  //  //  //\n\n  const [fullBill, setFullBill] = React.useState();\n  useEffect(() => {\n    if (createBill !== undefined && items !== undefined) {\n      setFullBill({\n        bill: createBill,\n        billItems: items,\n        billPayments: []\n      });\n    }\n  }, [createBill, items]);\n  const [openConferm, setOpenConferm] = useState(false);\n\n  const handleClickOpenConferm = () => {\n    setOpenConferm(true);\n  };\n\n  const handleCloseConferm = () => {\n    setOpenConferm(false);\n  }; //  //  //  //  //\n  //  DELETE ITEM //\n  //  //  //  //  //\n\n\n  const delete_item = e => {\n    setItems(items.filter(item => e !== item));\n  };\n\n  const test = e => {\n    e.preventDefault();\n    console.log('hello patient');\n  }; //  //  //  //  //\n  //  SAVE BILL   //\n  //  //  //  //  //\n\n\n  const saveBill = () => {\n    if (fullBill !== undefined && items.length !== 0) setBillComplete(true);\n  };\n\n  useEffect(() => {\n    if (billComplete === true && fullBill !== undefined) newBill(fullBill);\n  }, [billComplete, fullBill]); //Increase Items\n\n  const [incIt, setIncIt] = useState(0);\n  const [decIt, setDecIt] = useState(0);\n  useEffect(() => {\n    if (items === undefined) setIncIt(0);\n  }, [items]);\n  useEffect(() => {\n    if (items === undefined) setDecIt(0);\n  }, [items]);\n\n  const incrementItem = e => {\n    if (e.itemQuantity !== undefined) {\n      setIncIt(e.itemQuantity);\n      e.itemQuantity = incIt + 1;\n    }\n  };\n\n  const decrementItem = e => {\n    if (e.itemQuantity !== undefined) {\n      if (e.itemQuantity > 1) {\n        setDecIt(e.itemQuantity);\n        if (decIt > 0) e.itemQuantity = decIt - 1;\n      }\n    }\n  };\n\n  switch (activityTransitionState) {\n    case \"TO_DASHBOARD\":\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: dashboardRoute,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 20\n        }\n      });\n\n    case \"TO_BILL_HOME\":\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/billing\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 20\n        }\n      });\n\n    default:\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"new_Bill\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(AppHeader, {\n        userCredentials: userCredentials,\n        breadcrumbMap: breadcrumbMap,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"newBill__background\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"newBill__content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"newBill__title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 29\n        }\n      }, t(\"nav.newbill\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"newBill__panel\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"billPanel\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"newBill_Head\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"newBill_Date_Pat\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(TextField, {\n        className: \"bill_Date\",\n        id: \"date\",\n        label: \"SELECT DATE\",\n        type: \"date\",\n        defaultValue: \"\",\n        InputLabelProps: {\n          shrink: true\n        },\n        onChange: e => get_date(e),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 49\n        }\n      }), /*#__PURE__*/React.createElement(Button, {\n        type: \"submit\",\n        className: \"bill_SelectPat\",\n        onClick: e => getPat(e),\n        variant: \"outlined\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 49\n        }\n      }, \"find Patient\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"newBill_InputPat\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 49\n        }\n      }, \"Patient\"), /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 71\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"patient_input\",\n        value: patient_data,\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 84\n        }\n      }), /*#__PURE__*/React.createElement(Button, {\n        className: \"buttonBillSubmit\",\n        onClick: handleClickOpenConferm,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 49\n        }\n      }, \"SAVE\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"newBill_Rows\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(TableContainer, {\n        className: \"tableDrawer\",\n        component: Paper,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(Table, {\n        size: \"small\",\n        \"aria-label\": \"a dense table\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 49\n        }\n      }, /*#__PURE__*/React.createElement(TableHead, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 53\n        }\n      }, /*#__PURE__*/React.createElement(TableRow, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 57\n        }\n      }, /*#__PURE__*/React.createElement(TableCell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 61\n        }\n      }, \"Description\"), /*#__PURE__*/React.createElement(TableCell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 61\n        }\n      }, \"Id\"), /*#__PURE__*/React.createElement(TableCell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 61\n        }\n      }, \"Amount\"), /*#__PURE__*/React.createElement(TableCell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 61\n        }\n      }, \"Qty\"), /*#__PURE__*/React.createElement(TableCell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 61\n        }\n      }, \"Delete\"))), /*#__PURE__*/React.createElement(TableBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 53\n        }\n      }, items === null || items === void 0 ? void 0 : items.map((x, y) => {\n        return /*#__PURE__*/React.createElement(TableRow, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 65\n          }\n        }, /*#__PURE__*/React.createElement(TableCell, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 69\n          }\n        }, x.itemDescription), /*#__PURE__*/React.createElement(TableCell, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 69\n          }\n        }, x.hashCode), /*#__PURE__*/React.createElement(TableCell, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 69\n          }\n        }, x.itemAmount), /*#__PURE__*/React.createElement(TableCell, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 69\n          }\n        }, x.itemQuantity, /*#__PURE__*/React.createElement(Button, {\n          onClick: () => incrementItem(x),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 96\n          }\n        }, /*#__PURE__*/React.createElement(AddIcon, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 137\n          }\n        })), /*#__PURE__*/React.createElement(Button, {\n          onClick: () => decrementItem(x),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 165\n          }\n        }, /*#__PURE__*/React.createElement(RemoveIcon, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 206\n          }\n        }))), /*#__PURE__*/React.createElement(TableCell, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 69\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          onClick: () => delete_item(x),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 80\n          }\n        }, /*#__PURE__*/React.createElement(HighlightOffIcon, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 119\n          }\n        }))));\n      }))))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"bill_Drawer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(DrawerActivity, {\n        prices: prices,\n        items: items,\n        setItems: setItems,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 37\n        }\n      }), /*#__PURE__*/React.createElement(Dialog, {\n        open: openConferm,\n        onClose: handleCloseConferm,\n        \"aria-labelledby\": \"form-dialog-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(DialogTitle, {\n        id: \"form-dialog-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 41\n        }\n      }, \"Confirm Message\"), /*#__PURE__*/React.createElement(Button, {\n        color: \"primary\",\n        size: \"large\",\n        onClick: saveBill,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 41\n        }\n      }, \"Confirm\"), /*#__PURE__*/React.createElement(Button, {\n        color: \"secondary\",\n        size: \"large\",\n        onClick: handleCloseConferm,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 41\n        }\n      }, \"Cancel\"), /*#__PURE__*/React.createElement(DialogContent, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          height: 30,\n          width: 250\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 45\n        }\n      }))))))), /*#__PURE__*/React.createElement(ConfirmationDialog, {\n        isOpen: hasSucceeded,\n        title: \"Bill Created\",\n        icon: checkIcon,\n        info: 'The bill registration was successful',\n        primaryButtonLabel: t(\"common.dashboard\"),\n        secondaryButtonLabel: 'Bill Dashboard',\n        handlePrimaryButtonClick: () => setActivityTransitionState(\"TO_DASHBOARD\"),\n        handleSecondaryButtonClick: () => setActivityTransitionState(\"TO_BILL_HOME\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(Footer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 21\n        }\n      }));\n  }\n};\n\nconst mapStateToProps = state => ({\n  userCredentials: state.main.authentication.data,\n  prices: state.prices.getPrices.data,\n  isLoading: state.bills.newBill.status === \"LOADING\",\n  hasSucceeded: state.bills.newBill.status === \"SUCCESS\",\n  hasFailed: state.bills.newBill.status === \"FAIL\"\n});\n\nconst mapDispatchToProps = {\n  getPrices,\n  newBill,\n  newBillReset\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(NewBillActivity);","map":{"version":3,"sources":["/home/zak/Tesi/OH_React_Tesi/src/components/activities/newBillActivity/NewBillActivity.tsx"],"names":["React","useEffect","useState","Redirect","AppHeader","Footer","Button","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","useTranslation","connect","checkIcon","DialogContent","DialogTitle","Dialog","AddIcon","RemoveIcon","HighlightOffIcon","getPrices","newBill","newBillReset","DrawerActivity","TextField","ConfirmationDialog","NewBillActivity","userCredentials","prices","hasFailed","hasSucceeded","isLoading","dashboardRoute","t","breadcrumbMap","items","setItems","activityTransitionState","setActivityTransitionState","billComplete","setBillComplete","token_auth","setToken","url","cont_t","acc","fetchDataTok","response","fetch","method","headers","json","token","error","console","log","pat","setPatient","getPat","e","preventDefault","auth","fetchData","Accept","Authorization","patient_data","firstName","secondName","createBill","setCreateBill","date","setDate","get_date","currentTarget","value","undefined","id","list","listId","patient","update","listName","patientTrue","patName","status","amount","balance","user","fullBill","setFullBill","bill","billItems","billPayments","openConferm","setOpenConferm","handleClickOpenConferm","handleCloseConferm","delete_item","filter","item","test","saveBill","length","incIt","setIncIt","decIt","setDecIt","incrementItem","itemQuantity","decrementItem","shrink","map","x","y","itemDescription","hashCode","itemAmount","height","width","mapStateToProps","state","main","authentication","data","bills","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { ChangeEvent, Children, FunctionComponent, useEffect, useRef, useState } from \"react\";\nimport { Redirect } from \"react-router\";\nimport AppHeader from \"../../accessories/appHeader/AppHeader\";\nimport Footer from \"../../accessories/footer/Footer\";\nimport Button from \"@material-ui/core/Button\";\nimport Table from '@material-ui/core/Table';\nimport TextData from '@material-ui/core/TextField'\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { useTranslation } from \"react-i18next\";\nimport { connect } from \"react-redux\";\nimport checkIcon from \"../../../assets/check-icon.png\";\nimport { IState } from \"../../../types\";\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Dialog from '@material-ui/core/Dialog';\nimport AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport \"./styles.scss\";\nimport HighlightOffIcon from '@material-ui/icons/HighlightOff';\nimport {\n    getPrices,\n} from \"../../../state/prices/actions\"\nimport {\n    newBill,\n    newBillReset\n} from \"../../../state/bills/actions\";\nimport {\n    IDispatchProps,\n    IStateProps,\n    TProps,\n    TActivityTransitionState\n} from \"./types\";\nimport DrawerActivity from \"./DrawerActivity\";\nimport { BillDTO, BillItemsDTO, FullBillDTO, PatientDTO } from \"../../../generated\";\nimport TextField from \"@material-ui/core/TextField\";\nimport ConfirmationDialog from \"../../accessories/confirmationDialog/ConfirmationDialog\";\nimport set from \"date-fns/set\";\n\nconst NewBillActivity: FunctionComponent<TProps> = ({\n    userCredentials,\n    prices,\n    getPrices,\n    newBill,\n    newBillReset,\n    hasFailed,\n    hasSucceeded,\n    isLoading,\n    dashboardRoute\n}) => {\n\n    const { t } = useTranslation();\n\n    const breadcrumbMap = {\n        [t(\"nav.dashboard\")]: \"/\",\n        [t(\"nav.billing\")]: \"/billing\",\n        [t(\"nav.newbill\")]: \"/bills\",\n    };\n\n    //get prices/list\n    useEffect(() => {\n        getPrices();\n    }, []);\n\n    const [items, setItems] = React.useState<BillItemsDTO[]>([]);\n\n    const [activityTransitionState, setActivityTransitionState] =\n        useState<TActivityTransitionState>(\"IDLE\");\n\n    const [billComplete, setBillComplete] = useState(false);\n\n    useEffect(() => {\n        if (\n            activityTransitionState === \"TO_BILL_HOME\" ||\n            activityTransitionState === \"TO_DASHBOARD\"\n        ) {\n            newBillReset();\n        }\n    }, [activityTransitionState]);\n\n    //  //  //  //  //\n    //  GET TOKEN   //\n    //  //  //  //  //\n    const [token_auth, setToken] = useState('');\n    useEffect(() => {\n        const url = \"https://www.open-hospital.org/oh11-api/auth/login?password=admin&username=admin\";\n        const cont_t = 'application/json'\n        const acc = \"*/*\";\n\n        const fetchDataTok = async () => {\n            try {\n                const response = await fetch(url, { method: 'POST', headers: { 'Content-Type': cont_t, 'Accept': acc } });\n                const json = await response.json();\n                setToken(json.token)\n            } catch (error) {\n                console.log(\"error\", error);\n            }\n        };\n        fetchDataTok();\n    }, []);\n\n\n    //  //  //  //  //\n    //  GET PATIENT //\n    //  //  //  //  //\n    const [pat, setPatient] = useState<PatientDTO>();\n    const getPat = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n        e.preventDefault();\n        const url = \"https://www.open-hospital.org/oh11-api/patients?page=1&size=1\";\n        const auth = \"Bearer \" + token_auth;\n        const acc = \"application/json\";\n\n        const fetchData = async () => {\n            try {\n                const response = await fetch(url, { method: 'GET', headers: { Accept: acc, Authorization: auth } });\n                const json = await response.json();\n                setPatient(json[0])\n            } catch (error) {\n                console.log(\"error\", error);\n            }\n        };\n        fetchData();\n\n    };\n\n    const patient_data = pat?.firstName + \" \" + pat?.secondName;\n\n\n    const [createBill, setCreateBill] = React.useState<BillDTO>();\n\n    //GET DATE\n    const [date, setDate] = useState('');\n    const get_date = (e: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) => {\n        e.preventDefault();\n        setDate(e.currentTarget.value);\n    }\n\n    //Set patient and date\n    useEffect(() => {\n        if (date !== undefined && pat !== undefined)\n            setCreateBill({\n                id: 0,\n                list: true,\n                listId: 0,\n                patient: pat,\n                date: date,\n                update: date,\n                listName: \"Basic\",\n                patientTrue: true,\n                patName: pat?.firstName + \" \" + pat?.secondName,\n                status: \"O\",\n                amount: 1000,\n                balance: 1500,\n                user: \"admin\",\n            });\n\n    }, [date, pat])\n\n    //  //  //  //  //\n    // CREATE BILL  //\n    //  //  //  //  //\n    const [fullBill, setFullBill] = React.useState<FullBillDTO>();\n    useEffect(() => {\n        if (createBill !== undefined && items !== undefined) {\n            setFullBill({\n                bill: createBill,\n                billItems: items,\n                billPayments: []\n            });\n        }\n    }, [createBill, items]);\n\n    const [openConferm, setOpenConferm] = useState(false);\n    const handleClickOpenConferm = () => {\n        setOpenConferm(true);\n    };\n    const handleCloseConferm = () => {\n        setOpenConferm(false);\n    };\n\n    //  //  //  //  //\n    //  DELETE ITEM //\n    //  //  //  //  //\n    const delete_item = (e: BillItemsDTO) => {\n        setItems(items.filter(item => e !== item));\n    }\n\n    const test = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n        e.preventDefault();\n        console.log('hello patient')\n    }\n\n    //  //  //  //  //\n    //  SAVE BILL   //\n    //  //  //  //  //\n    const saveBill = () => {\n        if (fullBill !== undefined && items.length !== 0)\n            setBillComplete(true);\n    }\n\n    useEffect(() => {\n        if (billComplete === true && fullBill !== undefined)\n            newBill(fullBill)\n    }, [billComplete, fullBill])\n\n    //Increase Items\n    const [incIt, setIncIt] = useState(0);\n    const [decIt, setDecIt] = useState(0);\n\n    useEffect(() => {\n        if (items === undefined)\n            setIncIt(0)\n    }, [items])\n\n    useEffect(() => {\n        if (items === undefined)\n            setDecIt(0)\n    }, [items])\n\n    const incrementItem = (e: BillItemsDTO) => {\n        if (e.itemQuantity !== undefined) {\n            setIncIt(e.itemQuantity);\n            e.itemQuantity = incIt + 1;\n        }\n    }\n\n    const decrementItem = (e: BillItemsDTO) => {\n        if (e.itemQuantity !== undefined) {\n            if (e.itemQuantity > 1) {\n                setDecIt(e.itemQuantity);\n                if (decIt > 0)\n                    e.itemQuantity = decIt - 1;\n            }\n        }\n    }\n\n\n    switch (activityTransitionState) {\n        case \"TO_DASHBOARD\":\n            return <Redirect to={dashboardRoute} />;\n        case \"TO_BILL_HOME\":\n            return <Redirect to=\"/billing\" />;\n        default:\n            return (\n                <div className=\"new_Bill\">\n                    <AppHeader\n                        userCredentials={userCredentials}\n                        breadcrumbMap={breadcrumbMap}\n                    />\n                    <div className=\"newBill__background\">\n                        <div className=\"newBill__content\">\n                            <div className=\"newBill__title\">{t(\"nav.newbill\")}</div>\n                            <div className=\"newBill__panel\">\n                                <div className=\"billPanel\">\n\n                                    <form>\n                                        <div className=\"newBill_Head\">\n                                            <div className=\"newBill_Date_Pat\">\n                                                <TextField\n                                                    className='bill_Date'\n                                                    id=\"date\"\n                                                    label=\"SELECT DATE\"\n                                                    type=\"date\"\n                                                    defaultValue=\"\"\n                                                    InputLabelProps={{\n                                                        shrink: true,\n                                                    }}\n                                                    onChange={e => get_date(e)}\n                                                />\n                                                <Button type=\"submit\" className='bill_SelectPat' onClick={e => getPat(e)} variant=\"outlined\">find Patient</Button>\n                                            </div>\n                                            <div className=\"newBill_InputPat\">\n                                                <label>Patient</label><span></span><input className=\"patient_input\" value={patient_data} disabled ></input>\n                                                <Button className=\"buttonBillSubmit\" onClick={handleClickOpenConferm}>SAVE</Button>\n                                            </div>\n\n                                        </div>\n                                        <div className=\"newBill_Rows\">\n                                            <TableContainer className=\"tableDrawer\" component={Paper}>\n                                                <Table size=\"small\" aria-label=\"a dense table\">\n                                                    <TableHead>\n                                                        <TableRow>\n                                                            <TableCell>Description</TableCell>\n                                                            <TableCell>Id</TableCell>\n                                                            <TableCell>Amount</TableCell>\n                                                            <TableCell>Qty</TableCell>\n                                                            <TableCell>Delete</TableCell>\n                                                        </TableRow>\n                                                    </TableHead>\n                                                    <TableBody>\n                                                        {items?.map((x, y) => {\n                                                            return (\n                                                                <TableRow>\n                                                                    <TableCell>{x.itemDescription}</TableCell>\n                                                                    <TableCell>{x.hashCode}</TableCell>\n                                                                    <TableCell>{x.itemAmount}</TableCell>\n                                                                    <TableCell>{x.itemQuantity}<Button onClick={() => incrementItem(x)}><AddIcon></AddIcon></Button><Button onClick={() => decrementItem(x)}><RemoveIcon></RemoveIcon></Button></TableCell>\n                                                                    <TableCell><Button onClick={() => delete_item(x)}><HighlightOffIcon></HighlightOffIcon></Button></TableCell>\n                                                                </TableRow>\n                                                            )\n                                                        }\n                                                        )}\n                                                    </TableBody>\n                                                </Table>\n                                            </TableContainer>\n                                        </div>\n                                    </form>\n                                </div>\n                                <div className=\"bill_Drawer\">\n                                    <DrawerActivity prices={prices} items={items} setItems={setItems} />\n                                    <Dialog open={openConferm} onClose={handleCloseConferm} aria-labelledby=\"form-dialog-title\">\n                                        <DialogTitle id=\"form-dialog-title\">Confirm Message</DialogTitle>\n                                        <Button color=\"primary\" size=\"large\" onClick={saveBill} >Confirm</Button>\n                                        <Button color=\"secondary\" size=\"large\" onClick={handleCloseConferm} >Cancel</Button>\n                                        <DialogContent>\n                                            <div style={{ height: 30, width: 250 }}>\n                                            </div>\n                                        </DialogContent>\n                                    </Dialog>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <ConfirmationDialog\n                        isOpen={hasSucceeded}\n                        title=\"Bill Created\"\n                        icon={checkIcon}\n                        info={'The bill registration was successful'}\n                        primaryButtonLabel={t(\"common.dashboard\")}\n                        secondaryButtonLabel={'Bill Dashboard'}\n                        handlePrimaryButtonClick={() =>\n                            setActivityTransitionState(\"TO_DASHBOARD\")\n                        }\n                        handleSecondaryButtonClick={() =>\n                            setActivityTransitionState(\"TO_BILL_HOME\")\n                        }\n                    />\n                    <Footer />\n                </div>\n            );\n    }\n};\n\nconst mapStateToProps = (state: IState): IStateProps => ({\n    userCredentials: state.main.authentication.data,\n    prices: state.prices.getPrices.data,\n    isLoading: state.bills.newBill.status === \"LOADING\",\n    hasSucceeded: state.bills.newBill.status === \"SUCCESS\",\n    hasFailed: state.bills.newBill.status === \"FAIL\",\n});\n\n\nconst mapDispatchToProps: IDispatchProps = {\n    getPrices,\n    newBill,\n    newBillReset,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NewBillActivity);\n"]},"metadata":{},"sourceType":"module"}