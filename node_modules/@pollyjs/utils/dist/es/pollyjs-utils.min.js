import t from"url-parse";import e from"qs";import{Buffer as r}from"buffer";var n={RECORD:"record",REPLAY:"replay",PASSTHROUGH:"passthrough",STOPPED:"stopped"},o={RECORD:"record",REPLAY:"replay",INTERCEPT:"intercept",PASSTHROUGH:"passthrough"},i=["GET","PUT","POST","DELETE","PATCH","MERGE","HEAD","OPTIONS"],u={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choice",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"},c={RECORD:"record",WARN:"warn",ERROR:"error"};class a extends Error{constructor(t,...e){super(`[Polly] ${t}`,...e),Error.captureStackTrace&&Error.captureStackTrace(this,a),this.name="PollyError"}}function f(t,e){if(!e)throw new a(t)}var s=Object.freeze({}),l=Math.ceil,p=Math.floor,h=function(t){return isNaN(t=+t)?0:(t>0?p:l)(t)},y=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t};function v(t,e){return t(e={exports:{}},e.exports),e.exports}var d=v(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),m=v(function(t){var e=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=e)}),g=(m.version,function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}),b=function(t,e,r){if(g(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}},S=function(t){return"object"==typeof t?null!==t:"function"==typeof t},O=function(t){if(!S(t))throw TypeError(t+" is not an object!");return t},w=function(t){try{return!!t()}catch(t){return!0}},P=!w(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),_=d.document,E=S(_)&&S(_.createElement),T=function(t){return E?_.createElement(t):{}},j=!P&&!w(function(){return 7!=Object.defineProperty(T("div"),"a",{get:function(){return 7}}).a}),R=function(t,e){if(!S(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!S(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!S(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!S(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")},A=Object.defineProperty,x={f:P?Object.defineProperty:function(t,e,r){if(O(t),e=R(e,!0),O(r),j)try{return A(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},L=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},M=P?function(t,e,r){return x.f(t,e,L(1,r))}:function(t,e,r){return t[e]=r,t},F={}.hasOwnProperty,N=function(t,e){return F.call(t,e)},C=function(t,e,r){var n,o,i,u=t&C.F,c=t&C.G,a=t&C.S,f=t&C.P,s=t&C.B,l=t&C.W,p=c?m:m[e]||(m[e]={}),h=p.prototype,y=c?d:a?d[e]:(d[e]||{}).prototype;for(n in c&&(r=e),r)(o=!u&&y&&void 0!==y[n])&&N(p,n)||(i=o?y[n]:r[n],p[n]=c&&"function"!=typeof y[n]?r[n]:s&&o?b(i,d):l&&y[n]==i?function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(i):f&&"function"==typeof i?b(Function.call,i):i,f&&((p.virtual||(p.virtual={}))[n]=i,t&C.R&&h&&!h[n]&&M(h,n,i)))};C.F=1,C.G=2,C.S=4,C.P=8,C.B=16,C.W=32,C.U=64,C.R=128;var k,I=C,D=M,B={},G={}.toString,H=function(t){return G.call(t).slice(8,-1)},U=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==H(t)?t.split(""):Object(t)},q=function(t){return U(y(t))},W=Math.min,V=function(t){return t>0?W(h(t),9007199254740991):0},$=Math.max,K=Math.min,z=v(function(t){var e=d["__core-js_shared__"]||(d["__core-js_shared__"]={});(t.exports=function(t,r){return e[t]||(e[t]=void 0!==r?r:{})})("versions",[]).push({version:m.version,mode:"pure",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),Y=0,J=Math.random(),Q=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++Y+J).toString(36))},X=z("keys"),Z=function(t){return X[t]||(X[t]=Q(t))},tt=(k=!1,function(t,e,r){var n,o=q(t),i=V(o.length),u=function(t,e){return(t=h(t))<0?$(t+e,0):K(t,e)}(r,i);if(k&&e!=e){for(;i>u;)if((n=o[u++])!=n)return!0}else for(;i>u;u++)if((k||u in o)&&o[u]===e)return k||u||0;return!k&&-1}),et=Z("IE_PROTO"),rt=function(t,e){var r,n=q(t),o=0,i=[];for(r in n)r!=et&&N(n,r)&&i.push(r);for(;e.length>o;)N(n,r=e[o++])&&(~tt(i,r)||i.push(r));return i},nt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),ot=Object.keys||function(t){return rt(t,nt)},it=P?Object.defineProperties:function(t,e){O(t);for(var r,n=ot(e),o=n.length,i=0;o>i;)x.f(t,r=n[i++],e[r]);return t},ut=d.document,ct=ut&&ut.documentElement,at=Z("IE_PROTO"),ft=function(){},st=function(){var t,e=T("iframe"),r=nt.length;for(e.style.display="none",ct.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),st=t.F;r--;)delete st.prototype[nt[r]];return st()},lt=Object.create||function(t,e){var r;return null!==t?(ft.prototype=O(t),r=new ft,ft.prototype=null,r[at]=t):r=st(),void 0===e?r:it(r,e)},pt=v(function(t){var e=z("wks"),r=d.Symbol,n="function"==typeof r;(t.exports=function(t){return e[t]||(e[t]=n&&r[t]||(n?r:Q)("Symbol."+t))}).store=e}),ht=x.f,yt=pt("toStringTag"),vt=function(t,e,r){t&&!N(t=r?t:t.prototype,yt)&&ht(t,yt,{configurable:!0,value:e})},dt={};M(dt,pt("iterator"),function(){return this});var mt,gt=function(t,e,r){t.prototype=lt(dt,{next:L(1,r)}),vt(t,e+" Iterator")},bt=function(t){return Object(y(t))},St=Z("IE_PROTO"),Ot=Object.prototype,wt=Object.getPrototypeOf||function(t){return t=bt(t),N(t,St)?t[St]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Ot:null},Pt=pt("iterator"),_t=!([].keys&&"next"in[].keys()),Et=function(){return this},Tt=function(t,e,r,n,o,i,u){gt(r,e,n);var c,a,f,s=function(t){if(!_t&&t in y)return y[t];switch(t){case"keys":case"values":return function(){return new r(this,t)}}return function(){return new r(this,t)}},l=e+" Iterator",p="values"==o,h=!1,y=t.prototype,v=y[Pt]||y["@@iterator"]||o&&y[o],d=v||s(o),m=o?p?s("entries"):d:void 0,g="Array"==e&&y.entries||v;if(g&&(f=wt(g.call(new t)))!==Object.prototype&&f.next&&vt(f,l,!0),p&&v&&"values"!==v.name&&(h=!0,d=function(){return v.call(this)}),u&&(_t||h||!y[Pt])&&M(y,Pt,d),B[e]=d,B[l]=Et,o)if(c={values:p?d:s("values"),keys:i?d:s("keys"),entries:m},u)for(a in c)a in y||D(y,a,c[a]);else I(I.P+I.F*(_t||h),e,c);return c},jt=(mt=!0,function(t,e){var r,n,o=String(y(t)),i=h(e),u=o.length;return i<0||i>=u?mt?"":void 0:(r=o.charCodeAt(i))<55296||r>56319||i+1===u||(n=o.charCodeAt(i+1))<56320||n>57343?mt?o.charAt(i):r:mt?o.slice(i,i+2):n-56320+(r-55296<<10)+65536});Tt(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=jt(e,r),this._i+=t.length,{value:t,done:!1})});var Rt=function(t,e){return{value:e,done:!!t}};Tt(Array,"Array",function(t,e){this._t=q(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,Rt(1)):Rt(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])},"values");B.Arguments=B.Array;for(var At=pt("toStringTag"),xt="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Lt=0;Lt<xt.length;Lt++){var Mt=xt[Lt],Ft=d[Mt],Nt=Ft&&Ft.prototype;Nt&&!Nt[At]&&M(Nt,At,Mt),B[Mt]=B.Array}var Ct,kt,It,Dt=pt("toStringTag"),Bt="Arguments"==H(function(){return arguments}()),Gt=function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Dt))?r:Bt?H(e):"Object"==(n=H(e))&&"function"==typeof e.callee?"Arguments":n},Ht=function(t,e,r,n){try{return n?e(O(r)[0],r[1]):e(r)}catch(e){var o=t.return;throw void 0!==o&&O(o.call(t)),e}},Ut=pt("iterator"),qt=Array.prototype,Wt=pt("iterator"),Vt=m.getIteratorMethod=function(t){if(null!=t)return t[Wt]||t["@@iterator"]||B[Gt(t)]},$t=v(function(t){var e={},r={},n=t.exports=function(t,n,o,i,u){var c,a,f,s,l,p=u?function(){return t}:Vt(t),h=b(o,i,n?2:1),y=0;if("function"!=typeof p)throw TypeError(t+" is not iterable!");if(void 0===(l=p)||B.Array!==l&&qt[Ut]!==l){for(f=p.call(t);!(a=f.next()).done;)if((s=Ht(f,h,a.value,n))===e||s===r)return s}else for(c=V(t.length);c>y;y++)if((s=n?h(O(a=t[y])[0],a[1]):h(t[y]))===e||s===r)return s};n.BREAK=e,n.RETURN=r}),Kt=pt("species"),zt=function(t,e){var r,n=O(t).constructor;return void 0===n||null==(r=O(n)[Kt])?e:g(r)},Yt=d.process,Jt=d.setImmediate,Qt=d.clearImmediate,Xt=d.MessageChannel,Zt=d.Dispatch,te=0,ee={},re=function(){var t=+this;if(ee.hasOwnProperty(t)){var e=ee[t];delete ee[t],e()}},ne=function(t){re.call(t.data)};Jt&&Qt||(Jt=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return ee[++te]=function(){!function(t,e,r){var n=void 0===r;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}t.apply(r,e)}("function"==typeof t?t:Function(t),e)},Ct(te),te},Qt=function(t){delete ee[t]},"process"==H(Yt)?Ct=function(t){Yt.nextTick(b(re,t,1))}:Zt&&Zt.now?Ct=function(t){Zt.now(b(re,t,1))}:Xt?(It=(kt=new Xt).port2,kt.port1.onmessage=ne,Ct=b(It.postMessage,It,1)):d.addEventListener&&"function"==typeof postMessage&&!d.importScripts?(Ct=function(t){d.postMessage(t+"","*")},d.addEventListener("message",ne,!1)):Ct="onreadystatechange"in T("script")?function(t){ct.appendChild(T("script")).onreadystatechange=function(){ct.removeChild(this),re.call(t)}}:function(t){setTimeout(b(re,t,1),0)});var oe={set:Jt,clear:Qt},ie=oe.set,ue=d.MutationObserver||d.WebKitMutationObserver,ce=d.process,ae=d.Promise,fe="process"==H(ce);function se(t){var e,r;this.promise=new t(function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n}),this.resolve=g(e),this.reject=g(r)}var le={f:function(t){return new se(t)}},pe=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},he=d.navigator,ye=he&&he.userAgent||"",ve=function(t,e){if(O(t),S(e)&&e.constructor===t)return e;var r=le.f(t);return(0,r.resolve)(e),r.promise},de=pt("species"),me=pt("iterator"),ge=!1;try{var be=[7][me]();be.return=function(){ge=!0},Array.from(be,function(){throw 2})}catch(t){}var Se,Oe,we,Pe,_e,Ee,Te,je=oe.set,Re=function(){var t,e,r,n=function(){var n,o;for(fe&&(n=ce.domain)&&n.exit();t;){o=t.fn,t=t.next;try{o()}catch(n){throw t?r():e=void 0,n}}e=void 0,n&&n.enter()};if(fe)r=function(){ce.nextTick(n)};else if(!ue||d.navigator&&d.navigator.standalone)if(ae&&ae.resolve){var o=ae.resolve(void 0);r=function(){o.then(n)}}else r=function(){ie.call(d,n)};else{var i=!0,u=document.createTextNode("");new ue(n).observe(u,{characterData:!0}),r=function(){u.data=i=!i}}return function(n){var o={fn:n,next:void 0};e&&(e.next=o),t||(t=o,r()),e=o}}(),Ae=d.TypeError,xe=d.process,Le=xe&&xe.versions,Me=Le&&Le.v8||"",Fe=d.Promise,Ne="process"==Gt(xe),Ce=function(){},ke=Oe=le.f,Ie=!!function(){try{var t=Fe.resolve(1),e=(t.constructor={})[pt("species")]=function(t){t(Ce,Ce)};return(Ne||"function"==typeof PromiseRejectionEvent)&&t.then(Ce)instanceof e&&0!==Me.indexOf("6.6")&&-1===ye.indexOf("Chrome/66")}catch(t){}}(),De=function(t){var e;return!(!S(t)||"function"!=typeof(e=t.then))&&e},Be=function(t,e){if(!t._n){t._n=!0;var r=t._c;Re(function(){for(var n=t._v,o=1==t._s,i=0,u=function(e){var r,i,u,c=o?e.ok:e.fail,a=e.resolve,f=e.reject,s=e.domain;try{c?(o||(2==t._h&&Ue(t),t._h=1),!0===c?r=n:(s&&s.enter(),r=c(n),s&&(s.exit(),u=!0)),r===e.promise?f(Ae("Promise-chain cycle")):(i=De(r))?i.call(r,a,f):a(r)):f(n)}catch(t){s&&!u&&s.exit(),f(t)}};r.length>i;)u(r[i++]);t._c=[],t._n=!1,e&&!t._h&&Ge(t)})}},Ge=function(t){je.call(d,function(){var e,r,n,o=t._v,i=He(t);if(i&&(e=pe(function(){Ne?xe.emit("unhandledRejection",o,t):(r=d.onunhandledrejection)?r({promise:t,reason:o}):(n=d.console)&&n.error&&n.error("Unhandled promise rejection",o)}),t._h=Ne||He(t)?2:1),t._a=void 0,i&&e.e)throw e.v})},He=function(t){return 1!==t._h&&0===(t._a||t._c).length},Ue=function(t){je.call(d,function(){var e;Ne?xe.emit("rejectionHandled",t):(e=d.onrejectionhandled)&&e({promise:t,reason:t._v})})},qe=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),Be(e,!0))},We=function(t){var e,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw Ae("Promise can't be resolved itself");(e=De(t))?Re(function(){var n={_w:r,_d:!1};try{e.call(t,b(We,n,1),b(qe,n,1))}catch(t){qe.call(n,t)}}):(r._v=t,r._s=1,Be(r,!1))}catch(t){qe.call({_w:r,_d:!1},t)}}};Ie||(Fe=function(t){!function(t,e,r,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(r+": incorrect invocation!")}(this,Fe,"Promise","_h"),g(t),Se.call(this);try{t(b(We,this,1),b(qe,this,1))}catch(t){qe.call(this,t)}},(Se=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,r){for(var n in e)r&&t[n]?t[n]=e[n]:M(t,n,e[n]);return t}(Fe.prototype,{then:function(t,e){var r=ke(zt(this,Fe));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Ne?xe.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&Be(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),we=function(){var t=new Se;this.promise=t,this.resolve=b(We,t,1),this.reject=b(qe,t,1)},le.f=ke=function(t){return t===Fe||t===Pe?new we(t):Oe(t)}),I(I.G+I.W+I.F*!Ie,{Promise:Fe}),vt(Fe,"Promise"),Ee="function"==typeof m[_e="Promise"]?m[_e]:d[_e],P&&Ee&&!Ee[de]&&x.f(Ee,de,{configurable:!0,get:function(){return this}}),Pe=m.Promise,I(I.S+I.F*!Ie,"Promise",{reject:function(t){var e=ke(this);return(0,e.reject)(t),e.promise}}),I(I.S+!0*I.F,"Promise",{resolve:function(t){return ve(this===Pe?Fe:this,t)}}),I(I.S+I.F*!(Ie&&function(t,e){if(!e&&!ge)return!1;var r=!1;try{var n=[7],o=n[me]();o.next=function(){return{done:r=!0}},n[me]=function(){return o},t(n)}catch(t){}return r}(function(t){Fe.all(t).catch(Ce)})),"Promise",{all:function(t){var e=this,r=ke(e),n=r.resolve,o=r.reject,i=pe(function(){var r=[],i=0,u=1;$t(t,!1,function(t){var c=i++,a=!1;r.push(void 0),u++,e.resolve(t).then(function(t){a||(a=!0,r[c]=t,--u||n(r))},o)}),--u||n(r)});return i.e&&o(i.v),r.promise},race:function(t){var e=this,r=ke(e),n=r.reject,o=pe(function(){$t(t,!1,function(t){e.resolve(t).then(r.resolve,n)})});return o.e&&n(o.v),r.promise}}),I(I.P+I.R,"Promise",{finally:function(t){var e=zt(this,m.Promise||d.Promise),r="function"==typeof t;return this.then(r?function(r){return ve(e,t()).then(function(){return r})}:t,r?function(r){return ve(e,t()).then(function(){throw r})}:t)}}),I(I.S,"Promise",{try:function(t){var e=le.f(this),r=pe(t);return(r.e?e.reject:e.resolve)(r.v),e.promise}}),(Te=s)&&Te.default;var Ve=m.Promise,$e="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",Ke="["+$e+"]",ze=RegExp("^"+Ke+Ke+"*"),Ye=RegExp(Ke+Ke+"*$"),Je=function(t,e,r){var n={},o=w(function(){return!!$e[t]()||"​"!="​"[t]()}),i=n[t]=o?e(Qe):$e[t];r&&(n[r]=i),I(I.P+I.F*o,"String",n)},Qe=Je.trim=function(t,e){return t=String(y(t)),1&e&&(t=t.replace(ze,"")),2&e&&(t=t.replace(Ye,"")),t},Xe=Je,Ze=d.parseInt,tr=Xe.trim,er=/^[-+]?0[xX]/,rr=8!==Ze($e+"08")||22!==Ze($e+"0x16")?function(t,e){var r=tr(String(t),3);return Ze(r,e>>>0||(er.test(r)?16:10))}:Ze;I(I.G+I.F*(parseInt!=rr),{parseInt:rr});var nr=m.parseInt;function or(t){const e=nr(t,10);return new Ve(t=>e>0?setTimeout(t,e):t())}function ir(){return(new Date).toISOString()}var ur={f:{}.propertyIsEnumerable},cr=Object.getOwnPropertyDescriptor,ar={f:P?cr:function(t,e){if(t=q(t),e=R(e,!0),j)try{return cr(t,e)}catch(t){}if(N(t,e))return L(!ur.f.call(t,e),t[e])}},fr=function(t,e){var r=(m.Object||{})[t]||Object[t],n={};n[t]=e(r),I(I.S+I.F*w(function(){r(1)}),"Object",n)},sr=ar.f;fr("getOwnPropertyDescriptor",function(){return function(t,e){return sr(q(t),e)}});var lr=m.Object,pr=function(t,e){return lr.getOwnPropertyDescriptor(t,e)},hr=v(function(t){var e=Q("meta"),r=x.f,n=0,o=Object.isExtensible||function(){return!0},i=!w(function(){return o(Object.preventExtensions({}))}),u=function(t){r(t,e,{value:{i:"O"+ ++n,w:{}}})},c=t.exports={KEY:e,NEED:!1,fastKey:function(t,r){if(!S(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!N(t,e)){if(!o(t))return"F";if(!r)return"E";u(t)}return t[e].i},getWeak:function(t,r){if(!N(t,e)){if(!o(t))return!0;if(!r)return!1;u(t)}return t[e].w},onFreeze:function(t){return i&&c.NEED&&o(t)&&!N(t,e)&&u(t),t}}}),yr=(hr.KEY,hr.NEED,hr.fastKey,hr.getWeak,hr.onFreeze,{f:pt}),vr=x.f,dr=function(t){var e=m.Symbol||(m.Symbol={});"_"==t.charAt(0)||t in e||vr(e,t,{value:yr.f(t)})},mr={f:Object.getOwnPropertySymbols},gr=Array.isArray||function(t){return"Array"==H(t)},br=nt.concat("length","prototype"),Sr={f:Object.getOwnPropertyNames||function(t){return rt(t,br)}},Or=Sr.f,wr={}.toString,Pr="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],_r={f:function(t){return Pr&&"[object Window]"==wr.call(t)?function(t){try{return Or(t)}catch(t){return Pr.slice()}}(t):Or(q(t))}},Er=hr.KEY,Tr=ar.f,jr=x.f,Rr=_r.f,Ar=d.Symbol,xr=d.JSON,Lr=xr&&xr.stringify,Mr=pt("_hidden"),Fr=pt("toPrimitive"),Nr={}.propertyIsEnumerable,Cr=z("symbol-registry"),kr=z("symbols"),Ir=z("op-symbols"),Dr=Object.prototype,Br="function"==typeof Ar&&!!mr.f,Gr=d.QObject,Hr=!Gr||!Gr.prototype||!Gr.prototype.findChild,Ur=P&&w(function(){return 7!=lt(jr({},"a",{get:function(){return jr(this,"a",{value:7}).a}})).a})?function(t,e,r){var n=Tr(Dr,e);n&&delete Dr[e],jr(t,e,r),n&&t!==Dr&&jr(Dr,e,n)}:jr,qr=function(t){var e=kr[t]=lt(Ar.prototype);return e._k=t,e},Wr=Br&&"symbol"==typeof Ar.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Ar},Vr=function(t,e,r){return t===Dr&&Vr(Ir,e,r),O(t),e=R(e,!0),O(r),N(kr,e)?(r.enumerable?(N(t,Mr)&&t[Mr][e]&&(t[Mr][e]=!1),r=lt(r,{enumerable:L(0,!1)})):(N(t,Mr)||jr(t,Mr,L(1,{})),t[Mr][e]=!0),Ur(t,e,r)):jr(t,e,r)},$r=function(t,e){O(t);for(var r,n=function(t){var e=ot(t),r=mr.f;if(r)for(var n,o=r(t),i=ur.f,u=0;o.length>u;)i.call(t,n=o[u++])&&e.push(n);return e}(e=q(e)),o=0,i=n.length;i>o;)Vr(t,r=n[o++],e[r]);return t},Kr=function(t){var e=Nr.call(this,t=R(t,!0));return!(this===Dr&&N(kr,t)&&!N(Ir,t))&&(!(e||!N(this,t)||!N(kr,t)||N(this,Mr)&&this[Mr][t])||e)},zr=function(t,e){if(t=q(t),e=R(e,!0),t!==Dr||!N(kr,e)||N(Ir,e)){var r=Tr(t,e);return!r||!N(kr,e)||N(t,Mr)&&t[Mr][e]||(r.enumerable=!0),r}},Yr=function(t){for(var e,r=Rr(q(t)),n=[],o=0;r.length>o;)N(kr,e=r[o++])||e==Mr||e==Er||n.push(e);return n},Jr=function(t){for(var e,r=t===Dr,n=Rr(r?Ir:q(t)),o=[],i=0;n.length>i;)!N(kr,e=n[i++])||r&&!N(Dr,e)||o.push(kr[e]);return o};Br||(D((Ar=function(){if(this instanceof Ar)throw TypeError("Symbol is not a constructor!");var t=Q(arguments.length>0?arguments[0]:void 0),e=function(r){this===Dr&&e.call(Ir,r),N(this,Mr)&&N(this[Mr],t)&&(this[Mr][t]=!1),Ur(this,t,L(1,r))};return P&&Hr&&Ur(Dr,t,{configurable:!0,set:e}),qr(t)}).prototype,"toString",function(){return this._k}),ar.f=zr,x.f=Vr,Sr.f=_r.f=Yr,ur.f=Kr,mr.f=Jr,yr.f=function(t){return qr(pt(t))}),I(I.G+I.W+I.F*!Br,{Symbol:Ar});for(var Qr="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Xr=0;Qr.length>Xr;)pt(Qr[Xr++]);for(var Zr=ot(pt.store),tn=0;Zr.length>tn;)dr(Zr[tn++]);I(I.S+I.F*!Br,"Symbol",{for:function(t){return N(Cr,t+="")?Cr[t]:Cr[t]=Ar(t)},keyFor:function(t){if(!Wr(t))throw TypeError(t+" is not a symbol!");for(var e in Cr)if(Cr[e]===t)return e},useSetter:function(){Hr=!0},useSimple:function(){Hr=!1}}),I(I.S+I.F*!Br,"Object",{create:function(t,e){return void 0===e?lt(t):$r(lt(t),e)},defineProperty:Vr,defineProperties:$r,getOwnPropertyDescriptor:zr,getOwnPropertyNames:Yr,getOwnPropertySymbols:Jr});var en=w(function(){mr.f(1)});I(I.S+I.F*en,"Object",{getOwnPropertySymbols:function(t){return mr.f(bt(t))}}),xr&&I(I.S+I.F*(!Br||w(function(){var t=Ar();return"[null]"!=Lr([t])||"{}"!=Lr({a:t})||"{}"!=Lr(Object(t))})),"JSON",{stringify:function(t){for(var e,r,n=[t],o=1;arguments.length>o;)n.push(arguments[o++]);if(r=e=n[1],(S(e)||void 0!==t)&&!Wr(t))return gr(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!Wr(e))return e}),n[1]=e,Lr.apply(xr,n)}}),Ar.prototype[Fr]||M(Ar.prototype,Fr,Ar.prototype.valueOf),vt(Ar,"Symbol"),vt(Math,"Math",!0),vt(d.JSON,"JSON",!0);var rn=m.Object.getOwnPropertySymbols;fr("keys",function(){return function(t){return ot(bt(t))}});var nn=m.Object.keys;I(I.S+I.F*!P,"Object",{defineProperty:x.f});var on=m.Object,un=function(t,e,r){return on.defineProperty(t,e,r)};var cn=function(t,e,r){return e in t?un(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t};var an=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=nn(r);"function"==typeof rn&&(n=n.concat(rn(r).filter(function(t){return pr(r,t).enumerable}))),n.forEach(function(e){cn(t,e,r[e])})}return t};dr("asyncIterator"),dr("observable");const fn=(0,m.Symbol)(),sn=/\[\d+\]$/,ln=/\[\]$/;function pn(t,r){return e.parse(t,an({plainObjects:!0,ignoreQueryPrefix:!0,strictNullHandling:!0},r))}class hn extends t{constructor(t,e){super(t),e&&this.set("query",this.query||{})}set(t,e,r){return"query"===t?(e&&"string"==typeof e&&(this[fn]=function(t){const e=(t||"").replace("?","").split("&").map(t=>decodeURIComponent(t.split("=")[0]));for(const t of e){if(sn.test(t))return"indices";if(ln.test(t))return"brackets"}if(e.some((t,r)=>e.indexOf(t)!==r))return"repeat"}(e)||this[fn]),super.set(t,e,pn)):super.set(t,e,r)}toString(){return super.toString(t=>(function(t,r={}){return e.stringify(t,an({addQueryPrefix:!0,strictNullHandling:!0},r))})(t,{arrayFormat:this[fn]}))}}function yn(...t){const e=new hn(t.map(t=>t&&(t+"").trim()).filter(Boolean).join("/"));return e.set("pathname",e.pathname.replace(/\/{2,}/g,"/")),e.href}const vn=(()=>{try{return!!new Blob}catch(t){return!1}})();function dn(t){return new Ve((e,r)=>{const n=new FileReader;n.onend=r,n.onabort=r,n.onload=()=>e(n.result),n.readAsDataURL(new Blob([t],{type:t.type}))})}const mn="undefined"!=typeof FormData;I(I.S,"Array",{isArray:gr});var gn=m.Array.isArray;const bn="undefined"!=typeof Buffer,Sn="undefined"!=typeof ArrayBuffer;var On={blob:async function(t){return vn&&t instanceof Blob?await dn(t):t},formData:async function(t){if(mn&&t instanceof FormData){const e=[];for(const[r,n]of t.entries())if(vn&&n instanceof Blob){const t=await dn(n);e.push(`${r}=${t}`)}else e.push(`${r}=${n}`);return e.join("\r\n")}return t},buffer:function(t){if(bn&&t){let e;if(Buffer.isBuffer(t))e=t;else if(gn(t)&&t.some(t=>Buffer.isBuffer(t))){const r=t.map(t=>Buffer.from(t));e=Buffer.concat(r)}else"[object ArrayBuffer]"===`${t}`?e=Buffer.from(t):Sn&&ArrayBuffer.isView(t)&&(e=Buffer.from(t.buffer,t.byteOffset,t.byteLength));if(Buffer.isBuffer(e))return e.toString("hex")}return t}};function wn(t){const e=t.toString("utf8");return r.from(e,"utf8").equals(t)}export{o as ACTIONS,c as EXPIRY_STRATEGIES,i as HTTP_METHODS,u as HTTP_STATUS_CODES,n as MODES,a as PollyError,On as Serializers,hn as URL,f as assert,yn as buildUrl,wn as isBufferUtf8Representable,or as timeout,ir as timestamp};
//# sourceMappingURL=pollyjs-utils.min.js.map
